# Spring DI和IoC理解

## IoC（控制反转）

IoC（Inversion of Control，控制反转）是Spring的核心思想；对于Spring框架来说，就是由Spring来负责控制对象的生命周期和对象间的关系。

IoC不是一种编程技术，更偏向是一种编程思想，它指导我们如何设计出松耦合、更优良的程序。IoC指导我们应用程序获取资源时不是通过自己主动去取，而是等待IoC容器的注入。

传统应用程序都是由我们在类内部主动创建依赖对象，从而导致类与类之间高耦合，难于测试；有了IoC容器后，把创建和查找依赖对象的控制权交给了容器，由容器进行注入组合对象，所以对象与对象之间是松散耦合，这样也方便测试，利于功能复用，更重要的是使得程序的整个体系结构变得非常灵活。



 传统程序设计：

![img](img\_03_SpringDI和IoC理解_传统程序设计.png)



IoC容器程序设计：

![img](img\_03_SpringDI和IoC理解_IoC容器程序设计.png)

## DI（依赖注入）

DI（Dependency Injection，依赖注入），相对于IoC从思想层面上的描述；DI更多是从技术实现的角度来描述这件事情。

其实它们是同一个概念的不同角度描述，由于控制反转概念比较含糊（可能只是理解为容器控制对象这一个层面，很难让人想到谁来维护对象关系），所以2004年大师级人物Martin Fowler又给出了一个新的名字：“依赖注入”，相对IoC 而言，“依赖注入”明确描述了“被注入对象依赖IoC容器配置依赖对象”。

传统应用程序的类的对象间关系是由代码写死的调用创建，在程序的编译期已经决定。通过IoC，程序类实体的关系是在运行期决定的，即IoC容器将类之间的依赖关系注入到组件中；这时程序的实现中不在包括依赖关系，使得组件的重用更加灵活。要注意的是我们需要通过配置的方式告诉组件我们的依赖关系。

即可以简单理解位DI是IoC的实现方式。